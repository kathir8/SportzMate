<ion-content class="map-page">

  <div #mapRef id="map" [class]="{'map' : visiblePlayers().length}"></div>
  @if(visiblePlayers().length){
  <div class="bottom-area">
    <div class="cards-wrapper" #carouselRef (scroll)="onCarouselScroll()">
      @for(item of visiblePlayers(); track item.id){
      <div class="card" id="{{'card-' + item.id}}" (click)="openMateDetail(item.id)">
        <ion-row class="row-container">
          <ion-col size="auto">
            <ion-thumbnail class="mate-img">
              <img alt="profile" [src]="item.profileImg" />
            </ion-thumbnail>
          </ion-col>
          <ion-col class="detail-container">
            <ion-label class="name-place">{{item.name}}, {{item.location}}</ion-label>
            <div class="time-wrapper">
              <ion-icon [icon]="icons.calendarClear"></ion-icon>
              <ion-label class="time-text">{{item.eventDateTime | localTime:DATE_FORMATS.DAY_MONTH_TIME }}</ion-label>
            </div>
            <div class="badge-wrapper">
              <ionic-badge dynamicClass="members-cnt primary">
                <ion-icon [icon]="icons.peopleOutline" class="members-cnt-icon"></ion-icon> {{item.requiredMembers}}
              </ionic-badge>
              <ionic-badge dynamicClass="members-cnt secondary">
                <ion-icon [icon]="icons.peopleOutline" class="members-cnt-icon"></ion-icon> {{item.confirmedMembers}}
              </ionic-badge>
            </div>
          </ion-col>
          <ion-col size="auto" class="game-detail">
             <ionic-badge dynamicClass="distanceOrDuration">{{item.distanceOrDuration}}</ionic-badge>
            <ion-icon [icon]="icons.bicycleOutline"></ion-icon>
          </ion-col>
        </ion-row>
        <ionic-chip [outline]="true" color="primary" (ionClick)="interested()">
          Interested <ion-icon [icon]="icons.thumbsUpOutline"></ion-icon>
        </ionic-chip>
        <ionic-chip [outline]="true" color="primary" (ionClick)="chat()">
          Chat <ion-icon
            [icon]="icons.chatboxOutline"></ion-icon>
        </ionic-chip>
      </div>
      }
    </div>
  </div>
  }@else {
  <app-no-mate-found></app-no-mate-found>
  }

</ion-content>